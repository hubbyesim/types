{"version":3,"sources":["../src/schemas/firebase/partner.ts","../src/schemas/firebase/core.ts","../src/schemas/firebase/helpers.ts","../src/schemas/base/helpers.ts","../src/schemas/utils/nested-conversions.ts","../src/schemas/utils.ts","../src/schemas/base/refs.ts","../src/schemas/firebase/refs.ts","../src/schemas/base/partner.ts","../src/constants.ts","../src/schemas/base/api.ts","../src/schemas/base/booking.ts","../src/schemas/firebase/user.ts","../src/schemas/base/user.ts","../src/schemas/firebase/booking.ts","../src/schemas/base/country.ts","../src/schemas/firebase/country.ts","../src/schemas/firebase/package.ts","../src/schemas/base/package.ts","../src/schemas/firebase/promoCode.ts","../src/schemas/base/promoCode.ts","../src/schemas/base/esim.ts","../src/schemas/firebase/esim.ts","../src/schemas/firebase/payment.ts","../src/schemas/base/payment.ts","../src/schemas/firebase/message.ts","../src/schemas/base/message.ts","../src/schemas/utils/documentation.ts","../src/schemas/base/currency.ts","../src/schemas/firebase/currency.ts","../src/schemas/firebase/apiLogs.ts","../src/schemas/base/apiLogs.ts"],"sourcesContent":["import { z } from 'zod';\nimport {\n    baseModelSchema,\n    timestampSchema\n} from './core';\nimport {\n    toFirestore,\n    fromFirestore\n} from './helpers';\nimport {\n    GenericRefFieldMapping,\n    GenericDateFieldMapping,\n    genericToFirestore,\n    genericFromFirestore\n} from './utils';\nimport {\n    PARTNER_COLLECTION,\n    PRICE_LIST_COLLECTION,\n    PACKAGE_COLLECTION,\n    USER_COLLECTION\n} from './utils/collections';\nimport {\n    partnerRefSchema,\n    priceListRefSchema,\n    packageRefSchema,\n    userRefSchema,\n    partnerRefNullable,\n    userRefArrayNullable,\n    priceListRefNullable\n} from './refs';\nimport { NestedFieldPathMapping } from '../utils/nested-conversions';\n\n// Import base types and schemas\nimport {\n    commonPartnerFields,\n    packagePriceAppSchema,\n    partnerPricingStrategyAppSchema,\n    userPricingStrategyAppSchema,\n    scheduleSchema,\n    financialPropertiesAppSchema,\n    platformSettingsSchema,\n    addressSchema,\n    registrationSchema,\n    bankingDetailsSchema,\n    PartnerApp,\n    PriceListApp,\n    // Re-export other types\n    Address,\n    Registration,\n    BankingDetails,\n    PackagePriceApp,\n    PartnerPricingStrategyApp,\n    UserPricingStrategyApp,\n    FinancialPropertiesApp,\n    PackageStrategy,\n    BookingDefaults,\n    BookingConfirmation,\n    VisualIdentityBanner,\n    VisualIdentityBannerStrategy,\n    VisualIdentity,\n    ScheduleFilter,\n    commonFinancialPropertiesFields,\n    PlatformSettings\n} from '../base/partner';\n\n// Re-export base schemas\nexport * from '../base/partner';\n\n// Common package price fields shared with Firebase types\nconst commonPackagePriceFields = {\n    destination: z.string(),\n    label: z.string(),\n    type: z.enum(['data-limited', 'time-limited']),\n    price: z.number()\n};\n\nexport const packagePriceFirestoreSchema = z.object({\n    ...commonPackagePriceFields,\n    package: packageRefSchema.schema,\n});\n\n// Common pricing strategy fields with Firebase types\nconst commonPricingStrategyFields = {\n    modification_percentage: z.number()\n};\n\nexport const partnerPricingStrategyFirestoreSchema = z.object({\n    ...commonPricingStrategyFields,\n    strategy: z.enum(['split', 'bundle']),\n    default_price_list: priceListRefNullable,\n    custom_prices: z.array(packagePriceFirestoreSchema),\n});\n\nexport const userPricingStrategyFirestoreSchema = z.object({\n    ...commonPricingStrategyFields,\n    default_price_list: priceListRefNullable,\n    custom_prices: z.array(packagePriceFirestoreSchema),\n});\n\n// Create a modified version of commonFinancialPropertiesFields with Timestamp for Firebase\nconst firestoreFinancialPropertiesFields = {\n    ...commonFinancialPropertiesFields,\n    // Override date fields with timestamp\n    next_invoice: timestampSchema.nullable(),\n    last_invoice: timestampSchema.nullable()\n};\n\nexport const financialPropertiesFirestoreSchema = z.object({\n    ...firestoreFinancialPropertiesFields,\n    pricing_strategies: z.object({\n        partner: partnerPricingStrategyFirestoreSchema.optional(),\n        user: userPricingStrategyFirestoreSchema.optional()\n    }).nullable()\n}).nullable();\n\n// Firestore schema for Partner\nexport const partnerFirestoreSchema = baseModelSchema.extend({\n    ...commonPartnerFields,\n    parent: partnerRefNullable,\n    users: userRefArrayNullable,\n    financial_properties: financialPropertiesFirestoreSchema,\n    platform_settings: platformSettingsSchema\n});\n\n// Firestore schema for PriceList\nexport const priceListFirestoreSchema = baseModelSchema.extend({\n    name: z.string(),\n    description: z.string().nullable(),\n    type: z.enum(['partner', 'consumer']),\n    partner: partnerRefNullable,\n    package_prices: z.array(packagePriceFirestoreSchema)\n});\n\n// Types for Firestore schemas\nexport type PartnerFirestore = z.infer<typeof partnerFirestoreSchema>;\nexport type PriceListFirestore = z.infer<typeof priceListFirestoreSchema>;\nexport type PackagePriceFirestore = z.infer<typeof packagePriceFirestoreSchema>;\nexport type PartnerPricingStrategyFirestore = z.infer<typeof partnerPricingStrategyFirestoreSchema>;\nexport type UserPricingStrategyFirestore = z.infer<typeof userPricingStrategyFirestoreSchema>;\nexport type FinancialPropertiesFirestore = z.infer<typeof financialPropertiesFirestoreSchema>;\nexport type FinancialProperties = z.infer<typeof financialPropertiesAppSchema>;\nexport type Schedule = z.infer<typeof scheduleSchema>;\n// For backwards compatibility\nexport type Partner = PartnerFirestore;\nexport type PriceList = PriceListFirestore;\nexport type PackagePrice = PackagePriceFirestore;\n\n// Field mapping for Partner conversions\nconst partnerRefFieldMappings: GenericRefFieldMapping<PartnerApp, PartnerFirestore>[] = [\n    { app: 'parent', firestore: 'parent', collection: PARTNER_COLLECTION, nullable: true },\n    { app: 'users', firestore: 'users', collection: USER_COLLECTION, isArray: true, nullable: true }\n];\n\n// Date field mappings for partner conversions (using base fields from baseModelSchema)\nconst partnerDateFieldMappings: GenericDateFieldMapping<PartnerApp, PartnerFirestore>[] = [];\n\n// Define nested field mappings for financial_properties timestamps and package references\nconst nestedFieldMappings: NestedFieldPathMapping[] = [\n    // Financial properties nested timestamps\n    {\n        path: ['financial_properties', 'next_invoice'],\n        type: 'timestamp',\n        nullable: true\n    },\n    {\n        path: ['financial_properties', 'last_invoice'],\n        type: 'timestamp',\n        nullable: true\n    },\n    // Financial properties nested package references in pricing strategies\n    {\n        path: ['financial_properties', 'pricing_strategies', 'partner', 'custom_prices', '*', 'package'],\n        type: 'reference',\n        collection: PACKAGE_COLLECTION,\n        wildcardIndex: 4\n    },\n    {\n        path: ['financial_properties', 'pricing_strategies', 'user', 'custom_prices', '*', 'package'],\n        type: 'reference',\n        collection: PACKAGE_COLLECTION,\n        wildcardIndex: 4\n    },\n    // Price list references in pricing strategies\n    {\n        path: ['financial_properties', 'pricing_strategies', 'partner', 'default_price_list'],\n        type: 'reference',\n        collection: PRICE_LIST_COLLECTION,\n        nullable: true\n    },\n    {\n        path: ['financial_properties', 'pricing_strategies', 'user', 'default_price_list'],\n        type: 'reference',\n        collection: PRICE_LIST_COLLECTION,\n        nullable: true\n    }\n];\n\n// Conversion functions - use the nested field mappings\nexport const partnerToFirestore = (partner: PartnerApp): PartnerFirestore => {\n    const result = genericToFirestore({\n        appObject: partner,\n        refFieldMappings: partnerRefFieldMappings,\n        dateFieldMappings: partnerDateFieldMappings,\n        nestedFieldMappings: nestedFieldMappings\n    });\n\n    return result;\n};\n\nexport const partnerFromFirestore = (firestorePartner: PartnerFirestore): PartnerApp => {\n    const result = genericFromFirestore({\n        firestoreObject: firestorePartner,\n        refFieldMappings: partnerRefFieldMappings,\n        dateFieldMappings: partnerDateFieldMappings,\n        nestedFieldMappings: nestedFieldMappings\n    });\n\n    return result;\n};\n\n// Field mapping for PriceList conversions\nconst priceListRefFieldMappings: GenericRefFieldMapping<PriceListApp, PriceListFirestore>[] = [\n    { app: 'partner', firestore: 'partner', collection: PARTNER_COLLECTION, nullable: true }\n];\n\n// Define nested field mappings for price list\nconst priceListNestedFieldMappings: NestedFieldPathMapping[] = [\n    // Package references in package_prices array\n    {\n        path: ['package_prices', '*', 'package'],\n        type: 'reference',\n        collection: PACKAGE_COLLECTION,\n        wildcardIndex: 1\n    }\n];\n\nexport const priceListToFirestore = (priceList: PriceListApp): PriceListFirestore => {\n    return genericToFirestore({\n        appObject: priceList,\n        refFieldMappings: priceListRefFieldMappings,\n        dateFieldMappings: [],\n        nestedFieldMappings: priceListNestedFieldMappings\n    });\n};\n\nexport const priceListFromFirestore = (firestorePriceList: PriceListFirestore): PriceListApp => {\n    return genericFromFirestore({\n        firestoreObject: firestorePriceList,\n        refFieldMappings: priceListRefFieldMappings,\n        dateFieldMappings: [],\n        nestedFieldMappings: priceListNestedFieldMappings\n    });\n};\n\n\n","import { z } from 'zod';\nimport { Timestamp, DocumentReference, FieldValue } from 'firebase-admin/firestore';\n\n// --- Schemas moved from helpers.ts ---\n\n// Basic Firebase type schemas\nexport const timestampSchema = z.custom<Timestamp>(\n    (val): val is Timestamp => val instanceof Timestamp\n);\n\nexport const documentRefSchema = z.custom<DocumentReference>(\n    (val): val is DocumentReference =>\n        typeof val === 'object' &&\n        val !== null &&\n        'path' in val &&\n        'id' in val\n);\n\nexport const fieldValueSchema = z.custom<FieldValue>(\n    (val): val is FieldValue =>\n        typeof val === 'object' &&\n        val !== null &&\n        'isEqual' in val\n);\n\n// Base model schema using Firebase types\nexport const baseModelSchema = z.object({\n    id: z.string(),\n    created_at: timestampSchema,\n    updated_at: timestampSchema,\n    created_by: z.union([z.string(), z.null(), documentRefSchema]),\n    updated_by: z.union([z.string(), z.null(), documentRefSchema])\n});\n\n// Helper function to create document reference schemas\nexport const createDocRefSchema = <T>(collectionPath: string) => {\n    const schema = documentRefSchema.refine(\n        (ref) => ref.path.startsWith(collectionPath),\n        {\n            message: `Document reference must be from collection ${collectionPath}`\n        }\n    );\n\n    return {\n        schema,\n        collectionPath\n    };\n};\n\n// --- End of moved schemas ---\n\n// Type for the base model\nexport type HubbyModelFirestore = z.infer<typeof baseModelSchema>;\n// For backwards compatibility\nexport type HubbyModel = HubbyModelFirestore; ","import { z } from 'zod';\nimport { Timestamp, DocumentReference, FieldValue, Firestore } from 'firebase-admin/firestore';\nimport { baseModelAppSchema, testEnv } from '../base/helpers';\nimport * as admin from 'firebase-admin';\nimport { baseModelSchema } from './core';\nimport { createDocRefSchema } from './core';\n\n// Try to get the global Firestore instance\nlet globalDb: Firestore | undefined;\n\ntry {\n    // This will work if firebase-admin is already initialized elsewhere\n    if (admin.apps.length > 0) {\n        globalDb = admin.firestore();\n    }\n} catch (e) {\n    // Silently fail - we'll handle missing DB in the function calls\n}\n\n// Test environment document references for mocking\nexport class MockDocumentReference {\n    path: string;\n    id: string;\n\n    constructor(collectionPath: string, id: string) {\n        this.path = `${collectionPath}/${id}`;\n        this.id = id;\n    }\n}\n\n// Singleton to hold the firestore instance\nlet firestoreInstance: Firestore | null = null;\n\n// Setter for the Firestore instance\nexport const setFirestoreInstance = (db: Firestore) => {\n    firestoreInstance = db;\n};\n\n// Getter for the Firestore instance\nexport const getFirestoreInstance = (): Firestore => {\n    // First check our explicitly set instance\n    if (firestoreInstance) {\n        return firestoreInstance;\n    }\n    \n    // Then try the global instance\n    if (globalDb) {\n        return globalDb;\n    }\n    \n    // As a last resort, try to get it directly from firebase-admin\n    try {\n        if (admin.apps.length > 0) {\n            return admin.firestore();\n        }\n    } catch (e) {\n        // Fall through to error\n    }\n    \n    throw new Error('Firestore instance not available. Initialize firebase-admin or call setFirestoreInstance first.');\n};\n\n// Conversion helpers\nexport const toFirestore = {\n    date: (date: Date): Timestamp => Timestamp.fromDate(date),\n    ref: <T>(collectionPath: string, id: string, db?: Firestore): DocumentReference<T> => {\n        // For tests, return a mock document reference\n        if (testEnv.isTestEnvironment) {\n            return new MockDocumentReference(collectionPath, id) as any;\n        }\n\n        // Use provided db instance or try to get the global instance\n        const firestore = db || getFirestoreInstance();\n        return firestore.collection(collectionPath).doc(id) as DocumentReference<T>;\n    }\n};\n\nexport const fromFirestore = {\n    date: (timestamp: Timestamp): Date => timestamp.toDate(),\n    ref: <T>(docRef: DocumentReference<T> | MockDocumentReference): string => {\n        if (docRef instanceof MockDocumentReference) {\n            return docRef.id;\n        }\n        return (docRef as any).id;\n    }\n};\n\n// Re-export the app schema\nexport { baseModelAppSchema };\n\n// Define HubbyModel schemas explicitly\nexport const hubbyModelFirestoreSchema = baseModelSchema;\nexport const hubbyModelAppSchema = baseModelAppSchema;\n\n// Type for the base model\nexport type HubbyModelApp = z.infer<typeof hubbyModelAppSchema>;\n\n// For backwards compatibility\nexport type HHubbyModel = HubbyModelApp;\n\n// Helper function to convert a document reference schema to a string schema\nexport const docRefToStringSchema = <T>(docRefSchema: ReturnType<typeof createDocRefSchema<T>>) => {\n    return z.string().describe(`ID from ${docRefSchema.collectionPath}`);\n}; ","import { z } from 'zod';\n\n// Flag to indicate if we're running in a test environment\n// Export as object to make it mutable in ESM context\nexport const testEnv = { isTestEnvironment: false };\n\n\nconst iso8601Regex = /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(?:\\.\\d{1,3})?Z$/;\n\n// Helper function to convert string dates to Date objects\nexport const zDateString = () =>\n    z.preprocess((input: unknown) => {\n        if (typeof input === \"string\") {\n            if (!iso8601Regex.test(input)) {\n                return undefined; // invalid ISO format\n            }\n            const date = new Date(input);\n            if (!isNaN(date.getTime())) {\n                return date;\n            }\n            return undefined;\n        }\n        if (input instanceof Date && !isNaN(input.getTime())) {\n            return input;\n        }\n        return undefined;\n    }, z.date());\n\n// App version of the base model\nexport const baseModelAppSchema = z.object({\n    id: z.string(),\n    created_at: zDateString(),\n    updated_at: zDateString(),\n    created_by: z.union([z.string(), z.null()]),\n    updated_by: z.union([z.string(), z.null()])\n});\n\n// Define HubbyModel schemas explicitly for the app\nexport const hubbyModelAppSchema = baseModelAppSchema;\n\n// Type for the base model in the app\nexport type HubbyModelApp = z.infer<typeof hubbyModelAppSchema>;\n\n// For backwards compatibility\nexport type HHubbyModel = HubbyModelApp;\n\n// Helper function to create string ID schema\nexport const createIdSchema = (collectionPath: string) => {\n    return z.string().describe(`ID from ${collectionPath}`);\n};","import { DocumentReference, Timestamp } from 'firebase-admin/firestore';\nimport { toFirestore, fromFirestore } from '../firebase/helpers';\n\n/**\n * Interface for nested field path mapping configuration\n */\nexport interface NestedFieldPathMapping {\n  path: string[]; // Path to the nested field (e.g., ['api_keys', 'keys', '*', 'expires_at'])\n  type: 'timestamp' | 'reference';\n  collection?: string; // Required for reference type\n  nullable?: boolean;\n  arrayField?: boolean; // Whether the field is an array of references/timestamps\n  wildcardIndex?: number; // Index in the path that contains a wildcard '*'\n}\n\n/**\n * Deep traverses an object and returns the value at the specified path\n */\nconst getValueAtPath = (obj: any, path: string[], wildcardIndex?: number): any[] => {\n  if (!obj) return [];\n  \n  if (path.length === 0) return [obj];\n  \n  const [first, ...rest] = path;\n  \n  // Handle wildcard in the path\n  if (first === '*' && wildcardIndex !== undefined) {\n    if (!obj || typeof obj !== 'object') return [];\n    \n    // Collect all values at all possible keys at this level\n    const results: any[] = [];\n    for (const key of Object.keys(obj)) {\n      const nestedResults = getValueAtPath(obj[key], rest, wildcardIndex);\n      results.push(...nestedResults);\n    }\n    return results;\n  }\n  \n  return getValueAtPath(obj[first], rest, wildcardIndex);\n};\n\n/**\n * Deep traverses an object and sets the value at the specified path\n */\nconst setValueAtPath = (\n  obj: any, \n  path: string[], \n  valueTransformer: (value: any) => any,\n  wildcardIndex?: number,\n  arrayField?: boolean\n): void => {\n  if (!obj || path.length === 0) return;\n  \n  const [first, ...rest] = path;\n  \n  // Handle wildcard in the path\n  if (first === '*' && wildcardIndex !== undefined) {\n    if (!obj || typeof obj !== 'object') return;\n    \n    for (const key of Object.keys(obj)) {\n      setValueAtPath(obj[key], rest, valueTransformer, wildcardIndex, arrayField);\n    }\n    return;\n  }\n  \n  if (rest.length === 0) {\n    // We're at the leaf node, set the transformed value\n    if (obj[first] !== undefined && obj[first] !== null) {\n      // Handle array fields specially\n      if (arrayField && Array.isArray(obj[first])) {\n        obj[first] = obj[first].map((item: any) => valueTransformer(item));\n      } else {\n        obj[first] = valueTransformer(obj[first]);\n      }\n    }\n    return;\n  }\n  \n  // Ensure the path exists\n  if (obj[first] === undefined) {\n    obj[first] = {};\n  }\n  \n  setValueAtPath(obj[first], rest, valueTransformer, wildcardIndex, arrayField);\n};\n\n/**\n * Processes nested fields in an object, converting them to Firestore format\n */\nexport const processNestedFieldsToFirestore = (\n  obj: any,\n  nestedFieldMappings: NestedFieldPathMapping[]\n): void => {\n  if (!obj) return;\n  \n  nestedFieldMappings.forEach(mapping => {\n    const { path, type, collection, nullable, wildcardIndex, arrayField } = mapping;\n    \n    setValueAtPath(\n      obj,\n      path,\n      (value) => {\n        if (nullable && value === null) return null;\n        \n        if (type === 'timestamp' && value instanceof Date) {\n          return toFirestore.date(value);\n        }\n        \n        if (type === 'reference' && typeof value === 'string' && collection) {\n          return toFirestore.ref(collection, value);\n        }\n        \n        return value;\n      },\n      wildcardIndex,\n      arrayField\n    );\n  });\n};\n\n/**\n * Processes nested fields in an object, converting them from Firestore format\n */\nexport const processNestedFieldsFromFirestore = (\n  obj: any,\n  nestedFieldMappings: NestedFieldPathMapping[]\n): void => {\n  if (!obj) return;\n  \n  nestedFieldMappings.forEach(mapping => {\n    const { path, type, nullable, wildcardIndex, arrayField } = mapping;\n    \n    setValueAtPath(\n      obj,\n      path,\n      (value) => {\n        if (nullable && value === null) return null;\n        \n        if (type === 'timestamp' && value && typeof value === 'object' && 'toDate' in value) {\n          return fromFirestore.date(value as Timestamp);\n        }\n        \n        if (type === 'reference' && value && typeof value === 'object' && value.id) {\n          return fromFirestore.ref(value as DocumentReference);\n        }\n        \n        return value;\n      },\n      wildcardIndex,\n      arrayField\n    );\n  });\n};\n\n/**\n * Example usage for API keys:\n * \n * const apiKeysMappings: NestedFieldPathMapping[] = [\n *   {\n *     path: ['api_keys', 'keys', '*', 'expires_at'],\n *     type: 'timestamp',\n *     nullable: true,\n *     wildcardIndex: 2\n *   }\n * ];\n */ ","import { toFirestore, fromFirestore } from './firebase/helpers';\n// Import nested conversions\nimport { \n    processNestedFieldsToFirestore, \n    processNestedFieldsFromFirestore,\n    NestedFieldPathMapping\n} from './utils/nested-conversions';\n\n// Generic interfaces for field mappings\nexport interface GenericRefFieldMapping<AppType, FirestoreType> {\n    app: keyof AppType;\n    firestore: keyof FirestoreType;\n    collection: string;\n    nullable?: boolean;\n    isArray?: boolean;\n}\n\nexport interface GenericDateFieldMapping<AppType, FirestoreType> {\n    field: keyof FirestoreType & keyof AppType;\n    nullable?: boolean;\n}\n\n// Helper function to convert date-like values to Date\nexport const convertToDate = (value: any, field: string): Date => {\n    if (typeof value === 'string') {\n        return new Date(value);\n    }\n    if (value && typeof value === 'object' && typeof value.toDate === 'function') {\n        return value.toDate();\n    }\n    throw new Error(`Unable to convert value to Date: ${value} for field: ${field}`);\n};\n\nexport const isDate = (value: any): value is Date => {\n    return value && typeof value === 'object' && 'getTime' in value;\n};\n\n// Generic toFirestore conversion function\nexport function genericToFirestore<AppType extends Record<string, any>, FirestoreType extends Record<string, any>>({\n    appObject,\n    refFieldMappings,\n    dateFieldMappings,\n    specialCaseHandler,\n    nestedFieldMappings\n}: {\n    appObject: AppType;\n    refFieldMappings: GenericRefFieldMapping<AppType, FirestoreType>[];\n    dateFieldMappings: GenericDateFieldMapping<AppType, FirestoreType>[];\n    specialCaseHandler?: (result: Record<string, any>, appData: AppType) => void;\n    nestedFieldMappings?: NestedFieldPathMapping[];\n}): FirestoreType {\n    // Create base object with common fields but exclude reference fields\n    const result: Record<string, any> = {};\n\n    // Copy all fields except references that will be handled separately\n    const refFieldNames = refFieldMappings.map(mapping => mapping.app);\n    Object.keys(appObject as Record<string, any>).forEach(key => {\n        if (!refFieldNames.includes(key as keyof AppType)) {\n            result[key] = appObject[key as keyof AppType];\n        }\n    });\n\n    // Handle base model fields\n    if ('created_at' in appObject && isDate(appObject.created_at)) {\n        result.created_at = toFirestore.date(appObject.created_at);\n    }\n\n    if ('updated_at' in appObject && isDate(appObject.updated_at)) {\n        result.updated_at = toFirestore.date(appObject.updated_at);\n    }\n\n    if ('created_by' in appObject) {\n        result.created_by = typeof appObject.created_by === 'string' ? appObject.created_by : null;\n    }\n\n    if ('updated_by' in appObject) {\n        result.updated_by = typeof appObject.updated_by === 'string' ? appObject.updated_by : null;\n    }\n\n    // Convert date fields\n    dateFieldMappings.forEach(({ field, nullable }) => {\n        const value = appObject[field];\n        if (nullable && value === null) {\n            result[field as string] = null;\n        } else if (isDate(value)) {\n            result[field as string] = toFirestore.date(value);\n        }\n    });\n\n    // Convert reference fields\n    refFieldMappings.forEach(({ app, firestore, collection, isArray, nullable }) => {\n        const value = appObject[app];\n\n        if (isArray) {\n            if (nullable && value === null) {\n                result[firestore as string] = null;\n            } else if (Array.isArray(value)) {\n                result[firestore as string] = value.map((id: string) => toFirestore.ref<any>(collection, id));\n            }\n        } else {\n            if (nullable && value === null) {\n                result[firestore as string] = null;\n            } else if (typeof value === 'string') {\n                result[firestore as string] = toFirestore.ref<any>(collection, value);\n            }\n        }\n    });\n\n    // Apply any special case handling\n    if (specialCaseHandler) {\n        specialCaseHandler(result, appObject);\n    }\n\n    // Process nested fields if provided\n    if (nestedFieldMappings && nestedFieldMappings.length > 0) {\n        processNestedFieldsToFirestore(result, nestedFieldMappings);\n    }\n\n    return result as unknown as FirestoreType;\n}\n\n// Generic fromFirestore conversion function\nexport function genericFromFirestore<FirestoreType extends Record<string, any>, AppType extends Record<string, any>>({\n    firestoreObject,\n    refFieldMappings,\n    dateFieldMappings,\n    specialCaseHandler,\n    nestedFieldMappings\n}: {\n    firestoreObject: FirestoreType;\n    refFieldMappings: GenericRefFieldMapping<AppType, FirestoreType>[];\n    dateFieldMappings: GenericDateFieldMapping<AppType, FirestoreType>[];\n    specialCaseHandler?: (result: Record<string, any>, firestoreData: FirestoreType) => void;\n    nestedFieldMappings?: NestedFieldPathMapping[];\n}): AppType {\n    // Create base object excluding reference fields that will be handled separately\n    const result: Record<string, any> = {};\n\n    // Copy all fields except references that will be handled separately\n    const refFieldNames = refFieldMappings.map(mapping => mapping.firestore);\n    Object.keys(firestoreObject as Record<string, any>).forEach(key => {\n        if (!refFieldNames.includes(key as keyof FirestoreType)) {\n            result[key] = firestoreObject[key as keyof FirestoreType];\n        }\n    });\n\n    // Handle base model fields\n    if ('created_at' in firestoreObject) {\n        result.created_at = fromFirestore.date(firestoreObject.created_at as any);\n    }\n\n    if ('updated_at' in firestoreObject) {\n        result.updated_at = fromFirestore.date(firestoreObject.updated_at as any);\n    }\n\n    if ('created_by' in firestoreObject) {\n        const createdBy = firestoreObject.created_by;\n        result.created_by = typeof createdBy === 'string'\n            ? createdBy\n            : createdBy ? fromFirestore.ref(createdBy as any) : null;\n    }\n\n    if ('updated_by' in firestoreObject) {\n        const updatedBy = firestoreObject.updated_by;\n        result.updated_by = typeof updatedBy === 'string'\n            ? updatedBy\n            : updatedBy ? fromFirestore.ref(updatedBy as any) : null;\n    }\n\n    // Convert date fields\n    dateFieldMappings.forEach(({ field, nullable }) => {\n        const value = firestoreObject[field];\n        if ((nullable && value === null) || value === undefined) {\n            result[field as string] = null;\n        } else {\n            result[field as string] = convertToDate(value, field as string);\n        }\n    });\n\n    // Convert reference fields\n    refFieldMappings.forEach(({ app, firestore, nullable, isArray }) => {\n        const value = firestoreObject[firestore];\n\n        if (isArray) {\n            if (nullable && value === null) {\n                result[app as string] = null;\n            } else if (Array.isArray(value)) {\n                result[app as string] = value.map((ref: any) => fromFirestore.ref(ref));\n            }\n        } else {\n            if (nullable && value === null) {\n                result[app as string] = null;\n            } else if (value) {\n                result[app as string] = fromFirestore.ref(value as any);\n            }\n        }\n    });\n\n    // Apply any special case handling\n    if (specialCaseHandler) {\n        specialCaseHandler(result, firestoreObject);\n    }\n    \n    // Process nested fields if provided\n    if (nestedFieldMappings && nestedFieldMappings.length > 0) {\n        processNestedFieldsFromFirestore(result, nestedFieldMappings);\n    }\n\n    return result as unknown as AppType;\n} ","import { z } from 'zod';\nimport { createIdSchema } from './helpers';\n\n// Collection paths\nexport const PARTNER_COLLECTION = 'partners';\nexport const USER_COLLECTION = 'users';\nexport const PROFILE_COLLECTION = 'profiles';\nexport const PACKAGE_COLLECTION = 'packages';\nexport const PROMO_CODE_COLLECTION = 'promo_codes';\nexport const COUNTRY_COLLECTION = 'countries';\nexport const ESIM_COLLECTION = 'esims';\nexport const PAYMENT_COLLECTION = 'payments';\nexport const PRICE_LIST_COLLECTION = 'price_lists';\nexport const BOOKING_COLLECTION = 'bookings';\nexport const MESSAGE_COLLECTION = 'messages';\nexport const CURRENCY_COLLECTION = 'currencies';\nexport const API_LOG_COLLECTION = 'api_logs';\n\n// String ID schemas (for app schemas)\nexport const partnerRefString = createIdSchema(PARTNER_COLLECTION);\nexport const userRefString = createIdSchema(USER_COLLECTION);\nexport const profileRefString = createIdSchema(PROFILE_COLLECTION);\nexport const packageRefString = createIdSchema(PACKAGE_COLLECTION);\nexport const promoCodeRefString = createIdSchema(PROMO_CODE_COLLECTION);\nexport const countryRefString = createIdSchema(COUNTRY_COLLECTION);\nexport const esimRefString = createIdSchema(ESIM_COLLECTION);\nexport const paymentRefString = createIdSchema(PAYMENT_COLLECTION);\nexport const priceListRefString = createIdSchema(PRICE_LIST_COLLECTION);\nexport const bookingRefString = createIdSchema(BOOKING_COLLECTION);\nexport const messageRefString = createIdSchema(MESSAGE_COLLECTION);\nexport const currencyRefString = createIdSchema(CURRENCY_COLLECTION);\nexport const apiLogRefString = createIdSchema(API_LOG_COLLECTION);\n\n// Nullable string versions\nexport const partnerRefStringNullable = partnerRefString.nullable();\nexport const userRefStringNullable = userRefString.nullable();\nexport const profileRefStringNullable = profileRefString.nullable();\nexport const packageRefStringNullable = packageRefString.nullable();\nexport const promoCodeRefStringNullable = promoCodeRefString.nullable();\nexport const countryRefStringNullable = countryRefString.nullable();\nexport const esimRefStringNullable = esimRefString.nullable();\nexport const paymentRefStringNullable = paymentRefString.nullable();\nexport const priceListRefStringNullable = priceListRefString.nullable();\nexport const bookingRefStringNullable = bookingRefString.nullable();\nexport const messageRefStringNullable = messageRefString.nullable();\nexport const currencyRefStringNullable = currencyRefString.nullable();\nexport const apiLogRefStringNullable = apiLogRefString.nullable();\n\n// String array versions\nexport const partnerRefStringArray = z.array(z.string());\nexport const userRefStringArray = z.array(z.string());\nexport const profileRefStringArray = z.array(z.string());\nexport const packageRefStringArray = z.array(z.string());\nexport const promoCodeRefStringArray = z.array(z.string());\nexport const countryRefStringArray = z.array(z.string());\nexport const esimRefStringArray = z.array(z.string());\nexport const paymentRefStringArray = z.array(z.string());\nexport const priceListRefStringArray = z.array(z.string());\nexport const bookingRefStringArray = z.array(z.string());\nexport const messageRefStringArray = z.array(z.string());\nexport const currencyRefStringArray = z.array(z.string());\nexport const apiLogRefStringArray = z.array(z.string());\n\n// Nullable string array versions\nexport const partnerRefStringArrayNullable = partnerRefStringArray.nullable();\nexport const userRefStringArrayNullable = userRefStringArray.nullable();\nexport const profileRefStringArrayNullable = profileRefStringArray.nullable();\nexport const packageRefStringArrayNullable = packageRefStringArray.nullable();\nexport const promoCodeRefStringArrayNullable = promoCodeRefStringArray.nullable();\nexport const countryRefStringArrayNullable = countryRefStringArray.nullable();\nexport const esimRefStringArrayNullable = esimRefStringArray.nullable();\nexport const paymentRefStringArrayNullable = paymentRefStringArray.nullable();\nexport const priceListRefStringArrayNullable = priceListRefStringArray.nullable();\nexport const bookingRefStringArrayNullable = bookingRefStringArray.nullable();\nexport const messageRefStringArrayNullable = messageRefStringArray.nullable();\nexport const currencyRefStringArrayNullable = currencyRefStringArray.nullable();\nexport const apiLogRefStringArrayNullable = apiLogRefStringArray.nullable(); ","import { z } from 'zod';\nimport { createDocRefSchema } from './core';\n\n// Re-export collection paths from base\nimport {\n    PARTNER_COLLECTION,\n    USER_COLLECTION,\n    PROFILE_COLLECTION,\n    PACKAGE_COLLECTION,\n    PROMO_CODE_COLLECTION,\n    COUNTRY_COLLECTION,\n    ESIM_COLLECTION,\n    PAYMENT_COLLECTION,\n    PRICE_LIST_COLLECTION,\n    BOOKING_COLLECTION,\n    MESSAGE_COLLECTION,\n    CURRENCY_COLLECTION,\n    API_LOG_COLLECTION,\n\n    // Re-export string ref schemas\n    partnerRefString,\n    userRefString,\n    profileRefString,\n    packageRefString,\n    promoCodeRefString,\n    countryRefString,\n    esimRefString,\n    paymentRefString,\n    priceListRefString,\n    bookingRefString,\n    messageRefString,\n    currencyRefString,\n    apiLogRefString,\n\n    // Re-export nullable string ref schemas\n    partnerRefStringNullable,\n    userRefStringNullable,\n    profileRefStringNullable,\n    packageRefStringNullable,\n    promoCodeRefStringNullable,\n    countryRefStringNullable,\n    esimRefStringNullable,\n    paymentRefStringNullable,\n    priceListRefStringNullable,\n    bookingRefStringNullable,\n    messageRefStringNullable,\n    currencyRefStringNullable,\n    apiLogRefStringNullable,\n\n    // Re-export string array ref schemas\n    partnerRefStringArray,\n    userRefStringArray,\n    profileRefStringArray,\n    packageRefStringArray,\n    promoCodeRefStringArray,\n    countryRefStringArray,\n    esimRefStringArray,\n    paymentRefStringArray,\n    priceListRefStringArray,\n    bookingRefStringArray,\n    messageRefStringArray,\n    currencyRefStringArray,\n    apiLogRefStringArray,\n\n    // Re-export nullable string array ref schemas\n    partnerRefStringArrayNullable,\n    userRefStringArrayNullable,\n    profileRefStringArrayNullable,\n    packageRefStringArrayNullable,\n    promoCodeRefStringArrayNullable,\n    countryRefStringArrayNullable,\n    esimRefStringArrayNullable,\n    paymentRefStringArrayNullable,\n    priceListRefStringArrayNullable,\n    bookingRefStringArrayNullable,\n    messageRefStringArrayNullable,\n    currencyRefStringArrayNullable,\n    apiLogRefStringArrayNullable\n} from '../base/refs';\n\n// Re-export all for convenience\nexport * from '../base/refs';\n\n// Centralized ref schemas using Firebase DocumentReference\nexport const partnerRefSchema = createDocRefSchema<any>(PARTNER_COLLECTION);\nexport const userRefSchema = createDocRefSchema<any>(USER_COLLECTION);\nexport const profileRefSchema = createDocRefSchema<any>(PROFILE_COLLECTION);\nexport const packageRefSchema = createDocRefSchema<any>(PACKAGE_COLLECTION);\nexport const promoCodeRefSchema = createDocRefSchema<any>(PROMO_CODE_COLLECTION);\nexport const countryRefSchema = createDocRefSchema<any>(COUNTRY_COLLECTION);\nexport const esimRefSchema = createDocRefSchema<any>(ESIM_COLLECTION);\nexport const paymentRefSchema = createDocRefSchema<any>(PAYMENT_COLLECTION);\nexport const priceListRefSchema = createDocRefSchema<any>(PRICE_LIST_COLLECTION);\nexport const bookingRefSchema = createDocRefSchema<any>(BOOKING_COLLECTION);\nexport const messageRefSchema = createDocRefSchema<any>(MESSAGE_COLLECTION);\nexport const currencyRefSchema = createDocRefSchema<any>(CURRENCY_COLLECTION);\nexport const apiLogRefSchema = createDocRefSchema<any>(API_LOG_COLLECTION);\n\n// Export nullable versions\nexport const partnerRefNullable = partnerRefSchema.schema.nullable();\nexport const userRefNullable = userRefSchema.schema.nullable();\nexport const profileRefNullable = profileRefSchema.schema.nullable();\nexport const packageRefNullable = packageRefSchema.schema.nullable();\nexport const promoCodeRefNullable = promoCodeRefSchema.schema.nullable();\nexport const countryRefNullable = countryRefSchema.schema.nullable();\nexport const esimRefNullable = esimRefSchema.schema.nullable();\nexport const paymentRefNullable = paymentRefSchema.schema.nullable();\nexport const priceListRefNullable = priceListRefSchema.schema.nullable();\nexport const bookingRefNullable = bookingRefSchema.schema.nullable();\nexport const messageRefNullable = messageRefSchema.schema.nullable();\nexport const currencyRefNullable = currencyRefSchema.schema.nullable();\nexport const apiLogRefNullable = apiLogRefSchema.schema.nullable();\n\n// Export array versions\nexport const partnerRefArray = z.array(partnerRefSchema.schema);\nexport const userRefArray = z.array(userRefSchema.schema);\nexport const profileRefArray = z.array(profileRefSchema.schema);\nexport const packageRefArray = z.array(packageRefSchema.schema);\nexport const promoCodeRefArray = z.array(promoCodeRefSchema.schema);\nexport const countryRefArray = z.array(countryRefSchema.schema);\nexport const esimRefArray = z.array(esimRefSchema.schema);\nexport const paymentRefArray = z.array(paymentRefSchema.schema);\nexport const priceListRefArray = z.array(priceListRefSchema.schema);\nexport const bookingRefArray = z.array(bookingRefSchema.schema);\nexport const messageRefArray = z.array(messageRefSchema.schema);\nexport const currencyRefArray = z.array(currencyRefSchema.schema);\nexport const apiLogRefArray = z.array(apiLogRefSchema.schema);\n\n// Export nullable array versions\nexport const partnerRefArrayNullable = partnerRefArray.nullable();\nexport const userRefArrayNullable = userRefArray.nullable();\nexport const profileRefArrayNullable = profileRefArray.nullable();\nexport const packageRefArrayNullable = packageRefArray.nullable();\nexport const promoCodeRefArrayNullable = promoCodeRefArray.nullable();\nexport const countryRefArrayNullable = countryRefArray.nullable();\nexport const esimRefArrayNullable = esimRefArray.nullable();\nexport const paymentRefArrayNullable = paymentRefArray.nullable();\nexport const priceListRefArrayNullable = priceListRefArray.nullable();\nexport const bookingRefArrayNullable = bookingRefArray.nullable();\nexport const messageRefArrayNullable = messageRefArray.nullable();\nexport const currencyRefArrayNullable = currencyRefArray.nullable();\nexport const apiLogRefArrayNullable = apiLogRefArray.nullable(); ","import { z } from 'zod';\nimport {\n    baseModelAppSchema,\n    zDateString\n} from './helpers';\nimport { SUPPORTED_LOCALES, SupportedLocales, supportedLocalesSchema } from '../../constants';\nimport {\n    packageRefString,\n    partnerRefStringNullable,\n    userRefStringArrayNullable,\n    priceListRefStringNullable\n} from './refs';\n\n\n// Helper schemas for nested structures\nexport const addressSchema = z.object({\n    street: z.string().optional(),\n    city: z.string().optional(),\n    postal_code: z.string().optional(),\n    country: z.string().optional()\n}).nullable();\n\nexport const registrationSchema = z.object({\n    chamber_of_commerce_number: z.string().nullable().optional(),\n    vat_number: z.string().nullable().optional(),\n    anvr_number: z.number().nullable().optional(),\n    tax_number: z.string().nullable().optional()\n}).nullable();\n\nexport const bankingDetailsSchema = z.object({\n    account_holder: z.string(),\n    bank_name: z.string(),\n    iban: z.string()\n}).nullable();\n\n// Common package price fields shared between schemas\nexport const commonPackagePriceFields = {\n    destination: z.string(),\n    label: z.string(),\n    type: z.enum(['data-limit', 'time-limit']),\n    price: z.number()\n};\n\nexport const packagePriceAppSchema = z.object({\n    ...commonPackagePriceFields,\n    package: packageRefString,\n});\n\n// Common pricing strategy fields\nexport const commonPricingStrategyFields = {\n    modification_percentage: z.number()\n};\n\nexport const partnerPricingStrategyAppSchema = z.object({\n    ...commonPricingStrategyFields,\n    strategy: z.enum(['split', 'bundle']),\n    default_price_list: priceListRefStringNullable,\n    custom_prices: z.array(packagePriceAppSchema),\n});\n\nexport const userPricingStrategyAppSchema = z.object({\n    ...commonPricingStrategyFields,\n    default_price_list: priceListRefStringNullable,\n    custom_prices: z.array(packagePriceAppSchema),\n});\n\n// Common financial properties fields\nexport const commonFinancialPropertiesFields = {\n    administration_fee: z.number().nullable(),\n    income_per_gb: z.number().nullable(),\n    commission_fee: z.number().nullable().optional(),\n    payment_method: z.enum(['invoice', 'direct']),\n    requires_card: z.boolean().nullable(),\n    next_invoice: zDateString().nullable().optional(),\n    last_invoice: zDateString().nullable().optional(),\n};\n\nexport const financialPropertiesAppSchema = z.object({\n    ...commonFinancialPropertiesFields,\n    pricing_strategies: z.object({\n        partner: partnerPricingStrategyAppSchema.optional(),\n        user: userPricingStrategyAppSchema.optional()\n    }).nullable()\n}).nullable();\n\nexport const packageStrategySchema = z.object({\n    name: z.string(),\n    iso3_white_list: z.array(z.string()).optional(),\n    parameters: z.any()\n});\n\nexport const bookingDefaultsSchema = z.object({\n    locale: supportedLocalesSchema\n});\n\nexport const bookingConfirmationSchema = z.object({\n    brevo_template_id: z.number(),\n    send_booking_confirmation: z.boolean()\n});\n\nexport const visualIdentityBannerSchema = z.object({\n    image_url: z.string(),\n    alt: z.string(),\n    click_url: z.string(),\n    locale: supportedLocalesSchema,\n    properties: z.record(z.string())\n});\n\nexport const visualIdentityBannerStrategySchema = z.object({\n    strategy: z.enum(['fixed', 'rotating', 'destination', 'time_of_day']),\n    banners: z.array(visualIdentityBannerSchema).nullable().optional()\n});\n\nexport const visualIdentitySchema = z.object({\n    primary_color: z.string(),\n    secondary_color: z.string(),\n    logo: z.string(),\n    font: z.string(),\n    top_banner: visualIdentityBannerStrategySchema.optional(),\n    mid_banner: visualIdentityBannerStrategySchema.optional()\n});\n\nexport const scheduleFilterSchema = z.object({\n    type: z.enum(['iso3', 'gender', 'percentage', 'age']),\n    value: z.union([z.string(), z.number()]),\n    comparison: z.enum([\n        'equal',\n        'not_equal',\n        'greater_than',\n        'less_than',\n        'greater_than_or_equal',\n        'less_than_or_equal'\n    ])\n}).nullable();\n\nexport const scheduleSchema = z.object({\n    days: z.number(),\n    email: z.object({\n        brevo_template_id: z.number(),\n        subject: z.record(z.string()).refine(\n            (val: Record<string, string>) => Object.keys(val).every(key => SUPPORTED_LOCALES.includes(key as SupportedLocales)),\n            { message: \"Keys must be supported locales\" }\n        ).optional(),\n        preview_text: z.record(z.string()).refine(\n            (val: Record<string, string>) => Object.keys(val).every(key => SUPPORTED_LOCALES.includes(key as SupportedLocales)),\n            { message: \"Keys must be supported locales\" }\n        ).optional()\n    }).nullable().optional(),\n    push: z.object({\n        title: z.record(z.string()).optional(),\n        body: z.record(z.string()).optional(),\n        target: z.string()\n    }).nullable().optional(),\n    hour: z.number(),\n    key: z.string(),\n    method: z.enum(['email', 'sms', 'whatsapp', 'push']),\n    moment: z.enum(['departure_date', 'return_date', 'immediate']),\n    filter: scheduleFilterSchema.nullable().optional()\n});\n\nexport const freeEsimSchema = z.object({\n    package_specification: z.object({\n        size: z.string(),\n        type: z.string(),\n        destination: z.string()\n    }),\n    allowance: z.number()\n});\n\nexport const platformSettingsSchema = z.object({\n    package_strategy: packageStrategySchema.nullable().optional(),\n    free_esim: freeEsimSchema.nullable().optional(),\n    booking_defaults: bookingDefaultsSchema.nullable().optional(),\n    booking_confirmation: bookingConfirmationSchema.nullable().optional(),\n    schedules: z.array(scheduleSchema).optional(),\n}).nullable();\n\n// Common contact information fields\nconst commonContactFields = {\n    email: z.string().nullable(),\n    office_phone: z.string().nullable().optional(),\n};\n\n// Common partner fields\nexport const commonPartnerFields = {\n    name: z.string().nullable(),\n    type: z.string().nullable(),\n    is_active: z.boolean().nullable().optional(),\n    external_id: z.string().nullable().optional(),\n    contact: z.object(commonContactFields).nullable(),\n    address: addressSchema,\n    registration: registrationSchema,\n    banking_details: bankingDetailsSchema,\n    visual_identity: visualIdentitySchema.nullable(),\n    data: z.object({\n        source: z.string(),\n        manual: z.boolean()\n    }).nullable().optional(),\n};\n\n// App schema for Partner\nexport const partnerAppSchema = baseModelAppSchema.extend({\n    ...commonPartnerFields,\n    parent: partnerRefStringNullable,\n    users: userRefStringArrayNullable,\n    financial_properties: financialPropertiesAppSchema,\n    platform_settings: platformSettingsSchema\n});\n\n// App schema for PriceList\nexport const priceListAppSchema = baseModelAppSchema.extend({\n    name: z.string(),\n    description: z.string().nullable(),\n    type: z.enum(['partner', 'consumer']),\n    partner: partnerRefStringNullable,\n    package_prices: z.array(packagePriceAppSchema)\n});\n\n// Types for App schemas\nexport type PartnerApp = z.infer<typeof partnerAppSchema>;\nexport type PriceListApp = z.infer<typeof priceListAppSchema>;\nexport type Address = z.infer<typeof addressSchema>;\nexport type Registration = z.infer<typeof registrationSchema>;\nexport type BankingDetails = z.infer<typeof bankingDetailsSchema>;\nexport type PackagePriceApp = z.infer<typeof packagePriceAppSchema>;\nexport type PartnerPricingStrategyApp = z.infer<typeof partnerPricingStrategyAppSchema>;\nexport type UserPricingStrategyApp = z.infer<typeof userPricingStrategyAppSchema>;\nexport type FinancialPropertiesApp = z.infer<typeof financialPropertiesAppSchema>;\nexport type PackageStrategy = z.infer<typeof packageStrategySchema>;\nexport type BookingDefaults = z.infer<typeof bookingDefaultsSchema>;\nexport type BookingConfirmation = z.infer<typeof bookingConfirmationSchema>;\nexport type VisualIdentityBanner = z.infer<typeof visualIdentityBannerSchema>;\nexport type VisualIdentityBannerStrategy = z.infer<typeof visualIdentityBannerStrategySchema>;\nexport type VisualIdentity = z.infer<typeof visualIdentitySchema>;\nexport type ScheduleFilter = z.infer<typeof scheduleFilterSchema>;\nexport type Schedule = z.infer<typeof scheduleSchema>;\nexport type PlatformSettings = z.infer<typeof platformSettingsSchema>;\n\n// For backwards compatibility\nexport type HPartner = PartnerApp;\nexport type HPriceList = PriceListApp;\nexport type HPackagePrice = PackagePriceApp;\nexport type HFinancialProperties = FinancialPropertiesApp;\nexport type HPlatformSettings = PlatformSettings;\nexport type HVisualIdentity = VisualIdentity;\nexport type HSchedule = Schedule;\nexport type HPackageStrategy = PackageStrategy;\nexport type HBookingDefaults = BookingDefaults;\nexport type HBookingConfirmation = BookingConfirmation;\nexport type HVisualIdentityBanner = VisualIdentityBanner;\nexport type HVisualIdentityBannerStrategy = VisualIdentityBannerStrategy;\nexport type HScheduleFilter = ScheduleFilter; ","import { z } from 'zod';\n\nexport const SUPPORTED_LOCALES = [\n    'en-US',\n    'en-GB',\n    'nl-NL',\n    'de-DE',\n    'fr-FR',\n    'it-IT',\n    'es-ES',\n    'cs-CZ',\n    'pl-PL',\n    'pt-PT',\n    'fr-BE',\n    'nl-BE',\n    'de-AT',\n    'de-CH',\n    'fr-CH',\n    'it-CH',\n    'de-BE'\n] as const;\n\n// Define the type using TypeScript's typeof and indexing\nexport type SupportedLocales = typeof SUPPORTED_LOCALES[number];\n\n// Create a Zod schema for validation\nexport const supportedLocalesSchema = z.enum(SUPPORTED_LOCALES);\n\n// Type inference from the schema (alternative way to define the type)\nexport type SupportedLocalesFromSchema = z.infer<typeof supportedLocalesSchema>; ","import { z } from 'zod';\nimport { communicationOptionsSchema } from './booking';\nimport { zDateString } from './helpers';\n\n// Schema for package specification\nexport const packageSpecificationSchema = z.object({\n    destination: z.string().optional(),\n    size: z.string().optional(),\n    package_id: z.string().optional(),\n    iata_code: z.string().optional()\n});\n\nexport const packageSpecificationsSchema = z.array(packageSpecificationSchema);\n\n// ===== API TYPES FOR BOOKING =====\n// Booking API response schema\nexport const bookingApiResponseSchema = z.object({\n    id: z.string(),\n    title: z.string().nullable(),\n    first_name: z.string(),\n    last_name: z.string(),\n    full_name: z.string(),\n    pax: z.number(),\n    email: z.string().nullable(),\n    phone: z.string().nullable(),\n    booking_id: z.string().nullable(),\n    return_date: z.string().nullable(), // ISO string\n    partner: z.string(), // ID string\n    promo_codes: z.array(z.string()), // Array of ID strings\n    departure_date: z.string(), // ISO string\n    flight_number: z.string().optional(),\n    gender: z.enum([\"M\", \"F\", \"O\"]).optional(),\n    package_size: z.string().optional(),\n    sent_messages: z.record(z.any()).optional(),\n    users: z.array(z.string()), // Array of ID strings\n    esims: z.array(z.string()).nullable(), // Array of ID strings or null\n    locale: z.string(),\n    status: z.enum(['PENDING', 'CONFIRMED', 'COMPLETED', 'CANCELLED', 'UNPAID', 'EXPIRED']),\n    data: z.object({\n        source: z.string(),\n        manual: z.boolean()\n    }),\n    communication_options: communicationOptionsSchema,\n    is_processed_for_esim_restoration: z.boolean(),\n    is_pseudonymized: z.boolean(),\n    import_id: z.string().nullable().optional(),\n    created_at: z.string(), // ISO string\n    updated_at: z.string(), // ISO string\n    created_by: z.string().optional(),\n    updated_by: z.string().optional()\n});\n\n// PromoCode API response schema\nexport const promoCodeApiResponseSchema = z.object({\n    promo_code: z.string(),\n    package_id: z.string(),\n    package_size: z.string(),\n    destination: z.string()\n});\n\n// Booking API request schema\nexport const bookingApiRequestSchema = z.object({\n    id: z.string(),\n    title: z.string().nullable(),\n    first_name: z.string().nullable().optional(),\n    last_name: z.string().nullable().optional(),\n    full_name: z.string().nullable().optional(),\n    pax: z.number().int().min(1).nullable().optional(),\n    email: z.string().nullable().optional(),\n    phone: z.string().nullable().optional(),\n    booking_id: z.string().min(3).nullable().optional(),\n    return_date: zDateString().nullable(), // Must be after departure_date\n    departure_date: zDateString(), // ISO 8601 date string\n    flight_number: z.string().nullable().optional(),\n    gender: z.enum([\"M\", \"F\", \"O\"]).optional(),\n    package_size: z.string().optional(),\n    sent_messages: z.record(z.any()).optional(),\n    locale: z.string().min(2).max(5).optional(),\n    status: z.enum(['PENDING', 'CONFIRMED', 'COMPLETED', 'CANCELLED', 'UNPAID', 'EXPIRED']),\n    data: z.object({\n        source: z.string(),\n        manual: z.boolean()\n    }),\n    communication_options: communicationOptionsSchema,\n    is_processed_for_esim_restoration: z.boolean(),\n    is_pseudonymized: z.boolean(),\n    date_of_birth: zDateString().optional(),\n    package_specifications: packageSpecificationsSchema,\n    created_at: zDateString(),\n    updated_at: zDateString()\n});\n\n// ===== API TYPES FOR PARTNER =====\n// Partner API request schema\nexport const partnerApiRequestSchema = z.object({\n    id: z.string(),\n    name: z.string().nullable(),\n    type: z.string().nullable(),\n    is_active: z.boolean().nullable().optional(),\n    external_id: z.string().nullable().optional(),\n    parent: z.string().nullable(), // String ID\n    contact: z.object({\n        email: z.string().nullable(),\n        office_phone: z.string().nullable().optional()\n    }).nullable(),\n    address: z.object({\n        street: z.string().optional(),\n        city: z.string().optional(),\n        postal_code: z.string().optional(),\n        country: z.string().optional()\n    }).nullable().optional(),\n    registration: z.object({\n        chamber_of_commerce_number: z.string().nullable().optional(),\n        vat_number: z.string().nullable().optional(),\n        anvr_number: z.number().nullable().optional(),\n        tax_number: z.string().nullable().optional()\n    }).nullable().optional(),\n    banking_details: z.object({\n        account_holder: z.string(),\n        bank_name: z.string(),\n        iban: z.string()\n    }).nullable().optional(),\n    finance: z.object({\n        administration_fee: z.number().nullable(),\n        income_per_gb: z.number().nullable(),\n        commission_fee: z.number().optional(),\n        payment_method: z.enum([\"invoice\", \"direct\"]),\n        requires_card: z.boolean().nullable(),\n        next_invoice: zDateString().nullable(),\n        last_invoice: zDateString().nullable(),\n        pricing_strategies: z.object({\n            partner: z.object({\n                strategy: z.enum([\"split\", \"bundle\"]),\n                default_price_list: z.string().nullable(),\n                custom_prices: z.array(z.any()),\n                modification_percentage: z.number()\n            }),\n            user: z.object({\n                default_price_list: z.string().nullable(),\n                custom_prices: z.array(z.any()),\n                modification_percentage: z.number()\n            })\n        }).optional()\n    }).nullable(),\n    platform_settings: z.any().optional(),\n    visual_identity: z.any().nullable(),\n    users: z.array(z.string()).nullable(), // Array of string IDs\n    data: z.object({\n        source: z.string(),\n        manual: z.boolean()\n    }).optional(),\n    created_at: zDateString(),\n    updated_at: zDateString(),\n    created_by: z.string().nullable(),\n    updated_by: z.string().nullable()\n});\n\nexport const partnerApiResponseSchema = partnerApiRequestSchema;\n\n// Define types based on schemas\nexport type PackageSpecification = z.infer<typeof packageSpecificationSchema>;\nexport type PackageSpecifications = z.infer<typeof packageSpecificationsSchema>;\nexport type BookingApiRequest = z.infer<typeof bookingApiRequestSchema>;\nexport type BookingApiResponse = z.infer<typeof bookingApiResponseSchema>;\nexport type PromoCodeApiResponse = z.infer<typeof promoCodeApiResponseSchema>;\nexport type PartnerApiRequest = z.infer<typeof partnerApiRequestSchema>;\nexport type PartnerApiResponse = z.infer<typeof partnerApiResponseSchema>; ","import { z } from 'zod';\nimport {\n    baseModelAppSchema,\n    zDateString\n} from './helpers';\nimport {\n    partnerRefString,\n    promoCodeRefStringArray,\n    userRefStringArrayNullable,\n    esimRefStringArrayNullable\n} from './refs';\nimport { SupportedLocales, SUPPORTED_LOCALES, supportedLocalesSchema } from '../../constants';\n\n// Enum for communication channels\nexport const communicationChannelSchema = z.enum([\n    'EMAIL',\n    'WHATSAPP',\n    'PUSH_NOTIFICATION',\n    'SMS'\n]);\nexport type CommunicationChannelType = z.infer<typeof communicationChannelSchema>;\n\n// For backward compatibility\nexport type CommunicationChannel = CommunicationChannelType;\n\n// Add enum-like object for use in code\nexport const CommunicationChannel = {\n    EMAIL: 'EMAIL' as const,\n    WHATSAPP: 'WHATSAPP' as const,\n    PUSH_NOTIFICATION: 'PUSH_NOTIFICATION' as const,\n    SMS: 'SMS' as const\n} as const;\n\n// Schema for communication options\nexport const communicationOptionsSchema = z.object({\n    should_send_message: z.boolean(),\n    channels: z.array(communicationChannelSchema)\n});\n\n// Status type for bookings\nexport const bookingStatusSchema = z.enum([\n    'PENDING',\n    'CONFIRMED',\n    'COMPLETED',\n    'CANCELLED',\n    'UNPAID',\n    'EXPIRED'\n]);\nexport type BookingStatus = z.infer<typeof bookingStatusSchema>;\n\n// Common booking fields shared between schemas\nexport const commonBookingFields = {\n    title: z.string().nullable(),\n    first_name: z.string(),\n    last_name: z.string(),\n    full_name: z.string(),\n    pax: z.number(),\n    email: z.string().email().nullable(),\n    phone: z.string().nullable(),\n    booking_id: z.string().nullable(),\n    flight_number: z.string().optional(),\n    gender: z.enum(['M', 'F', 'O']).optional(),\n    package_size: z.string().optional(),\n    sent_messages: z.record(z.any()).optional(),\n    locale: supportedLocalesSchema,\n    status: bookingStatusSchema,\n    data: z.object({\n        source: z.string(),\n        manual: z.boolean()\n    }),\n    communication_options: communicationOptionsSchema,\n    is_processed_for_esim_restoration: z.boolean(),\n    is_pseudonymized: z.boolean(),\n    import_id: z.string().nullable().optional(),\n    package_specifications: z.record(z.any()).optional()\n};\n\n// App schema for Booking\nexport const bookingAppSchema = baseModelAppSchema.extend({\n    ...commonBookingFields,\n    return_date: zDateString().nullable(),\n    departure_date: zDateString(),\n    partner: partnerRefString,\n    promo_codes: promoCodeRefStringArray,\n    users: userRefStringArrayNullable,\n    esims: esimRefStringArrayNullable,\n});\n\n// Define types based on schemas\nexport type BookingApp = z.infer<typeof bookingAppSchema>;\nexport type CommunicationOptions = z.infer<typeof communicationOptionsSchema>;\n\n// For backwards compatibility\nexport type HBooking = BookingApp; ","import { z } from 'zod';\nimport { DocumentReference, Timestamp, FieldValue } from 'firebase-admin/firestore';\nimport {\n    baseModelSchema,\n    timestampSchema,\n    fieldValueSchema\n} from './core';\nimport {\n    GenericRefFieldMapping,\n    GenericDateFieldMapping,\n    genericToFirestore,\n    genericFromFirestore\n} from '../utils';\nimport {\n    PROFILE_COLLECTION,\n    PARTNER_COLLECTION\n} from '../utils/collections';\nimport {\n    partnerRefNullable,\n    profileRefNullable\n} from './refs';\nimport { toFirestore, fromFirestore } from './helpers';\nimport { NestedFieldPathMapping } from '../utils/nested-conversions';\n\n// Import base schemas\nimport {\n    apiKeysSchema as baseApiKeysSchema,\n    commonUserFields,\n    UserApp\n} from '../base/user';\n\n// Schema for API Key with Timestamp\nexport const apiKeySchema = z.object({\n    expires_at: timestampSchema,\n    secret: z.string(),\n    is_active: z.boolean()\n});\n\n// Schema for API Keys with Firebase specific types\nexport const apiKeysSchema = z.object({\n    allowed_keys: z.array(z.string()),\n    keys: z.record(z.string(), apiKeySchema)\n});\n\n// Define Firestore schema\nexport const userFirestoreSchema = baseModelSchema.extend({\n    ...commonUserFields,\n    createdAt: timestampSchema,\n    partner: partnerRefNullable,\n    profileRef: profileRefNullable,\n    balance: z.union([z.number(), z.null(), fieldValueSchema]),\n    review_requested: timestampSchema.nullable().optional(),\n    last_seen: timestampSchema.nullable().optional(),\n    api_keys: apiKeysSchema.nullable().optional(),\n});\n\n// Define types based on schemas\nexport type UserFirestore = z.infer<typeof userFirestoreSchema>;\nexport type ApiKeys = z.infer<typeof apiKeysSchema>;\nexport type ApiKey = z.infer<typeof apiKeySchema>;\n\n// Field mapping for conversions\nconst refFieldMappings: GenericRefFieldMapping<UserApp, UserFirestore>[] = [\n    { app: 'profileRef', firestore: 'profileRef', collection: PROFILE_COLLECTION, nullable: true },\n    { app: 'partner', firestore: 'partner', collection: PARTNER_COLLECTION, nullable: true }\n];\n\nconst dateFieldMappings: GenericDateFieldMapping<UserApp, UserFirestore>[] = [\n    { field: 'createdAt' },\n    { field: 'review_requested', nullable: true },\n    { field: 'last_seen', nullable: true }\n];\n\n// Define nested field mappings for api_keys and any other nested structure\nconst nestedFieldMappings: NestedFieldPathMapping[] = [\n    // API Keys nested timestamps\n    {\n        path: ['api_keys', 'keys', '*', 'expires_at'],\n        type: 'timestamp',\n        nullable: true,\n        wildcardIndex: 2\n    },\n    // Optional conversions for parameters field - only apply if needed\n    // Parameters nested timestamps - for example, if storing login timestamps\n    {\n        path: ['parameters', 'timestamps', 'lastLogin'],\n        type: 'timestamp',\n        nullable: true\n    },\n    {\n        path: ['parameters', 'timestamps', 'accountCreated'],\n        type: 'timestamp',\n        nullable: true\n    },\n    // Parameters nested partner references\n    {\n        path: ['parameters', 'relationships', 'primaryPartner'],\n        type: 'reference',\n        collection: PARTNER_COLLECTION,\n        nullable: true\n    },\n    {\n        path: ['parameters', 'relationships', 'otherPartners'],\n        type: 'reference',\n        collection: PARTNER_COLLECTION,\n        nullable: true,\n        arrayField: true\n    }\n];\n\n// Conversion functions\nexport const userToFirestore = (user: UserApp): UserFirestore => {\n    const result = genericToFirestore({\n        appObject: user,\n        refFieldMappings,\n        dateFieldMappings,\n        nestedFieldMappings\n    });\n\n    return result;\n};\n\nexport const userFromFirestore = (firestoreUser: UserFirestore): UserApp => {\n    const result = genericFromFirestore({\n        firestoreObject: firestoreUser,\n        refFieldMappings,\n        dateFieldMappings,\n        nestedFieldMappings,\n        specialCaseHandler: (result, firestoreData) => {\n            // Handle special case for balance field\n            if (firestoreData.balance instanceof FieldValue) {\n                result.balance = null; // Handle FieldValue by converting to null for the app\n            }\n        }\n    });\n\n    return result;\n};\n\n// Handle the special case of balance field which can be FieldValue\nexport const userToFirestoreWithBalance = (user: UserApp): UserFirestore => {\n    const result = userToFirestore(user);\n\n    // Special handling for balance field if it's a FieldValue\n    if (user.balance === null || typeof user.balance === 'number') {\n        result.balance = user.balance;\n    }\n\n    return result;\n};\n\n// Re-export the App schema type for convenience\nexport type { UserApp };\n\n// For backwards compatibility\nexport type User = UserFirestore; ","import { z } from 'zod';\nimport {\n    baseModelAppSchema,\n    zDateString\n} from './helpers';\nimport {\n    partnerRefStringNullable,\n    profileRefStringNullable\n} from './refs';\n\n// Schema for API Key (base version with Date)\nexport const apiKeySchema = z.object({\n    expires_at: zDateString(),\n    secret: z.string(),\n    is_active: z.boolean()\n});\n\n// Schema for API Keys\nexport const apiKeysSchema = z.object({\n    allowed_keys: z.array(z.string()),\n    keys: z.record(z.string(), apiKeySchema)\n});\n\n// Common user fields shared between schemas\nexport const commonUserFields = {\n    name: z.string().nullable(),\n    email: z.string().email().nullable(),\n    stripe_id: z.string().nullable(),\n    referral: z.string().nullable(),\n    fcm: z.string().optional(),\n    deeplink: z.string().nullable(),\n    gender: z.string().nullable(),\n    company: z.string().nullable(),\n    coordinates: z.string().nullable(),\n    parameters: z.any().nullable(),\n    locale: z.string().nullable(),\n    phone_model: z.string().nullable(),\n    phone_os: z.string().nullable(),\n    phone_os_version: z.string().nullable(),\n    ios: z.boolean().nullable(),\n    has_card_saved: z.boolean().nullable(),\n    admin: z.boolean().nullable(),\n    api_keys: apiKeysSchema.nullable(),\n    currency: z.string().nullable(),\n    receipt_email: z.string().nullable()\n};\n\n// Define App schema (with JavaScript-friendly types)\nexport const userAppSchema = baseModelAppSchema.extend({\n    ...commonUserFields,\n    createdAt: zDateString(),\n    partner: partnerRefStringNullable,\n    profileRef: profileRefStringNullable,\n    balance: z.number().nullable(),\n    review_requested: zDateString().nullable().optional(),\n    last_seen: zDateString().nullable().optional()\n});\n\n// Define types based on schemas\nexport type UserApp = z.infer<typeof userAppSchema>;\nexport type ApiKeys = z.infer<typeof apiKeysSchema>;\nexport type ApiKey = z.infer<typeof apiKeySchema>;\n\n// For backwards compatibility\nexport type HUser = UserApp; ","import { z } from 'zod';\nimport { Timestamp, DocumentReference, DocumentData } from 'firebase-admin/firestore';\nimport {\n    baseModelSchema,\n    timestampSchema\n} from './core';\nimport {\n    GenericRefFieldMapping,\n    GenericDateFieldMapping,\n    genericToFirestore,\n    genericFromFirestore\n} from './utils';\nimport {\n    PARTNER_COLLECTION,\n    PROMO_CODE_COLLECTION,\n    USER_COLLECTION,\n    ESIM_COLLECTION\n} from './utils/collections';\nimport {\n    partnerRefSchema,\n    promoCodeRefArray,\n    userRefArrayNullable,\n    esimRefArrayNullable\n} from './refs';\n\n// Import base schemas and types\nimport {\n    commonBookingFields,\n    BookingApp,\n    communicationChannelSchema,\n    CommunicationChannelType,\n    communicationOptionsSchema,\n    bookingStatusSchema,\n    BookingStatus,\n    CommunicationOptions\n} from '../base/booking';\n\n// Re-export base types and constants\nexport * from '../base/booking';\n\n// Firestore schema for Booking\nexport const bookingFirestoreSchema = baseModelSchema.extend({\n    ...commonBookingFields,\n    return_date: timestampSchema.nullable(),\n    departure_date: timestampSchema,\n    partner: partnerRefSchema.schema,\n    promo_codes: promoCodeRefArray,\n    users: userRefArrayNullable,\n    esims: esimRefArrayNullable,\n});\n\n// Define types based on schemas\nexport type BookingFirestore = z.infer<typeof bookingFirestoreSchema>;\n\n// Field mapping types for conversions\nconst refFieldMappings: GenericRefFieldMapping<BookingApp, BookingFirestore>[] = [\n    { app: 'partner', firestore: 'partner', collection: PARTNER_COLLECTION },\n    { app: 'promo_codes', firestore: 'promo_codes', collection: PROMO_CODE_COLLECTION, isArray: true },\n    { app: 'users', firestore: 'users', collection: USER_COLLECTION, isArray: true, nullable: true },\n    { app: 'esims', firestore: 'esims', collection: ESIM_COLLECTION, isArray: true, nullable: true }\n];\n\nconst dateFieldMappings: GenericDateFieldMapping<BookingApp, BookingFirestore>[] = [\n    { field: 'return_date', nullable: true },\n    { field: 'departure_date' }\n];\n\n// Conversion functions\nexport const bookingToFirestore = (booking: BookingApp): BookingFirestore => {\n    return genericToFirestore({\n        appObject: booking,\n        refFieldMappings,\n        dateFieldMappings\n    });\n};\n\nexport const bookingFromFirestore = (firestoreBooking: BookingFirestore): BookingApp => {\n    return genericFromFirestore({\n        firestoreObject: firestoreBooking,\n        refFieldMappings,\n        dateFieldMappings\n    });\n};\n\n// For backwards compatibility\nexport type Booking = BookingFirestore; ","import { z } from 'zod';\n\n// Country schema - no transformations needed as it doesn't contain Firebase-specific types\nexport const countryAppSchema = z.object({\n    id: z.string().nullable(),\n    bokun_id: z.number().nullable(),\n    LTE: z.boolean().nullable(),\n    apn: z.string().nullable(),\n    click_count: z.number().nullable(),\n    global_network: z.string().nullable(),\n    global_price: z.number().nullable(),\n    hubby: z.number().nullable(),\n    imsi: z.number().nullable(),\n    has_esim: z.boolean(),\n    name: z.string().nullable(),\n    region: z.boolean().nullable(),\n    is_region: z.boolean().nullable(),\n    countries: z.array(z.string()).nullable(),\n    tier: z.number().nullable()\n});\n\n// Define type based on schema\nexport type CountryApp = z.infer<typeof countryAppSchema>;\n\n// For backwards compatibility\nexport type HCountry = CountryApp; ","import { z } from 'zod';\nimport {\n    baseModelAppSchema\n} from './helpers';\nimport {\n    genericToFirestore,\n    genericFromFirestore\n} from './utils';\n\n// Import base schemas\nimport {\n    countryAppSchema,\n    CountryApp\n} from '../base/country';\n\n// Re-export base schemas\nexport * from '../base/country';\n\n// Country Firestore schema - identical to app schema as it doesn't contain Firestore-specific types\nexport const countryFirestoreSchema = countryAppSchema;\n\n// Define types based on schemas\nexport type CountryFirestore = z.infer<typeof countryFirestoreSchema>;\n\n// Conversion functions using generic utilities for consistency\nexport const countryToFirestore = (country: CountryApp): CountryFirestore => {\n    return genericToFirestore({\n        appObject: country,\n        refFieldMappings: [],\n        dateFieldMappings: []\n    });\n};\n\nexport const countryFromFirestore = (firestoreCountry: CountryFirestore): CountryApp => {\n    return genericFromFirestore({\n        firestoreObject: firestoreCountry,\n        refFieldMappings: [],\n        dateFieldMappings: []\n    });\n};\n\n// For backwards compatibility\nexport type Country = CountryFirestore; ","import { z } from 'zod';\nimport { DocumentReference } from 'firebase-admin/firestore';\nimport {\n    baseModelSchema\n} from './core';\nimport {\n    GenericRefFieldMapping,\n    genericToFirestore,\n    genericFromFirestore\n} from './utils';\nimport {\n    COUNTRY_COLLECTION,\n    PARTNER_COLLECTION\n} from './utils/collections';\nimport { countryFirestoreSchema, CountryFirestore } from './country';\nimport {\n    countryRefSchema,\n    partnerRefNullable\n} from './refs';\n\n// Import base schemas\nimport {\n    PackageApp\n} from '../base/package';\n\n// Re-export base schemas\nexport * from '../base/package';\n\n// Common package fields with Firebase types\nconst commonPackageFields = {\n    external_id: z.string(),\n    provider: z.string(),\n    coverage_label: z.string().nullable(),\n    label: z.string(),\n    bytes: z.number(),\n    hidden: z.boolean(),\n    is_hidden: z.boolean(),\n    is_active: z.boolean(),\n    priority: z.number(),\n    country_data: countryFirestoreSchema.nullable(),\n    price: z.number(),\n    partner_price: z.number(),\n    days: z.number(),\n    name: z.string(),\n    type: z.enum(['data-limited', 'time-limited']).nullable(),\n    throttling: z.number().optional(),\n    provider_parameters: z.object({\n        imsi: z.number()\n    }).nullable()\n};\n\n// Firestore schema for Package\nexport const packageFirestoreSchema = baseModelSchema.extend({\n    ...commonPackageFields,\n    country: countryRefSchema.schema,\n    partner: partnerRefNullable,\n});\n\n// Define types based on schemas\nexport type PackageFirestore = z.infer<typeof packageFirestoreSchema>;\n\n// Field mapping for conversions\nconst refFieldMappings: GenericRefFieldMapping<PackageApp, PackageFirestore>[] = [\n    { app: 'country', firestore: 'country', collection: COUNTRY_COLLECTION },\n    { app: 'partner', firestore: 'partner', collection: PARTNER_COLLECTION, nullable: true }\n];\n\n// Conversion functions\nexport const packageToFirestore = (packageData: PackageApp): PackageFirestore => {\n    return genericToFirestore({\n        appObject: packageData,\n        refFieldMappings,\n        dateFieldMappings: []\n    });\n};\n\nexport const packageFromFirestore = (firestorePackage: PackageFirestore): PackageApp => {\n    return genericFromFirestore({\n        firestoreObject: firestorePackage,\n        refFieldMappings,\n        dateFieldMappings: []\n    });\n};\n\n// For backwards compatibility\nexport type Package = PackageFirestore; ","import { z } from 'zod';\nimport {\n    baseModelAppSchema\n} from './helpers';\nimport {\n    countryRefString,\n    partnerRefStringNullable\n} from './refs';\nimport { countryAppSchema } from './country';\n\n// Common package fields shared between schemas\nexport const commonPackageFields = {\n    external_id: z.string(),\n    provider: z.string(),\n    coverage_label: z.string().nullable(),\n    label: z.string(),\n    bytes: z.number(),\n    hidden: z.boolean(),\n    is_hidden: z.boolean(),\n    is_active: z.boolean(),\n    priority: z.number(),\n    country_data: countryAppSchema.nullable(),\n    price: z.number(),\n    partner_price: z.number(),\n    days: z.number(),\n    name: z.string(),\n    type: z.enum(['data-limited', 'time-limited']).nullable(),\n    throttling: z.number().optional(),\n    provider_parameters: z.object({\n        imsi: z.number()\n    }).nullable()\n};\n\n// App schema for Package\nexport const packageAppSchema = baseModelAppSchema.extend({\n    ...commonPackageFields,\n    country: countryRefString,\n    partner: partnerRefStringNullable,\n});\n\n// Define types based on schemas\nexport type PackageApp = z.infer<typeof packageAppSchema>;\n\n// For backwards compatibility\nexport type HPackage = PackageApp; ","import { z } from 'zod';\nimport {\n    baseModelSchema,\n    timestampSchema\n} from './core';\nimport {\n    GenericRefFieldMapping,\n    GenericDateFieldMapping,\n    genericToFirestore,\n    genericFromFirestore\n} from './utils';\nimport {\n    PROMO_CODE_COLLECTION,\n    PARTNER_COLLECTION,\n    COUNTRY_COLLECTION,\n    PACKAGE_COLLECTION,\n    BOOKING_COLLECTION\n} from './utils/collections';\nimport { packageSpecificationSchema } from './api';\nimport {\n    partnerRefNullable,\n    countryRefNullable,\n    packageRefNullable,\n    bookingRefNullable\n} from './refs';\n\n// Import base schemas\nimport {\n    PromoCodeApp\n} from '../base/promoCode';\n\n// Re-export base schemas\nexport * from '../base/promoCode';\n\n// Firestore schema for PromoCode\nexport const promoCodeFirestoreSchema = baseModelSchema.extend({\n    external_id: z.string(),\n    code: z.string(),\n    allowance_user: z.number(),\n    allowance_total: z.number(),\n    type: z.enum(['full-discount', 'partial-discount', 'booking', 'traveler']).nullable().or(z.string()),\n    usage: z.array(z.string()),\n    uuid_usage: z.array(z.string()),\n    package_specification: packageSpecificationSchema.optional(),\n    partner: partnerRefNullable,\n    valid_from: z.union([z.string(), z.date(), timestampSchema]),\n    valid_to: z.union([z.string(), z.date(), timestampSchema]),\n\n    // Optional fields based on the type\n    discount: z.number().optional(),\n    package_size: z.string().optional(),\n    package: packageRefNullable,\n    country: countryRefNullable,\n    booking: bookingRefNullable,\n    countries: z.array(z.string()).optional(),\n    max_bytes: z.number().optional(),\n    starter_data: z.number().optional()\n});\n\n// Type definition\nexport type PromoCodeFirestore = z.infer<typeof promoCodeFirestoreSchema>;\n\n// Field mapping for conversions\nconst refFieldMappings: GenericRefFieldMapping<PromoCodeApp, PromoCodeFirestore>[] = [\n    { app: 'partner', firestore: 'partner', collection: PARTNER_COLLECTION, nullable: true },\n    { app: 'package', firestore: 'package', collection: PACKAGE_COLLECTION, nullable: true },\n    { app: 'country', firestore: 'country', collection: COUNTRY_COLLECTION, nullable: true },\n    { app: 'booking', firestore: 'booking', collection: BOOKING_COLLECTION, nullable: true }\n];\n\nconst dateFieldMappings: GenericDateFieldMapping<PromoCodeApp, PromoCodeFirestore>[] = [\n    { field: 'valid_from' },\n    { field: 'valid_to' }\n];\n\n// Conversion functions\nexport const promoCodeToFirestore = (promoCode: PromoCodeApp): PromoCodeFirestore => {\n    return genericToFirestore({\n        appObject: promoCode,\n        refFieldMappings,\n        dateFieldMappings\n    });\n};\n\nexport const promoCodeFromFirestore = (firestorePromoCode: PromoCodeFirestore): PromoCodeApp => {\n    return genericFromFirestore({\n        firestoreObject: firestorePromoCode,\n        refFieldMappings,\n        dateFieldMappings\n    });\n};\n\n// For backwards compatibility\nexport type PromoCode = PromoCodeFirestore; ","import { z } from 'zod';\nimport {\n    baseModelAppSchema,\n    zDateString\n} from './helpers';\nimport {\n    partnerRefStringNullable,\n    countryRefStringNullable,\n    packageRefStringNullable,\n    bookingRefStringNullable\n} from './refs';\nimport { packageSpecificationSchema } from './api';\n\n// App schema for PromoCode\nexport const promoCodeAppSchema = baseModelAppSchema.extend({\n    external_id: z.string(),\n    code: z.string(),\n    allowance_user: z.number(),\n    allowance_total: z.number(),\n    type: z.enum(['full-discount', 'partial-discount', 'booking', 'traveler']).nullable().or(z.string()),\n    usage: z.array(z.string()),\n    uuid_usage: z.array(z.string()),\n    package_specification: packageSpecificationSchema.optional(),\n    partner: partnerRefStringNullable,\n    valid_from: zDateString(),\n    valid_to: zDateString(),\n\n    // Optional fields based on the type\n    discount: z.number().optional(),\n    package_size: z.string().optional(),\n    package: packageRefStringNullable,\n    country: countryRefStringNullable,\n    booking: bookingRefStringNullable,\n    countries: z.array(z.string()).optional(),\n    max_bytes: z.number().optional(),\n    starter_data: z.number().optional()\n});\n\n// Type definition\nexport type PromoCodeApp = z.infer<typeof promoCodeAppSchema>;\n\n// For backwards compatibility\nexport type HPromoCode = PromoCodeApp; ","import { z } from 'zod';\nimport {\n    baseModelAppSchema,\n    zDateString\n} from './helpers';\n\n// Common fields shared between schemas\nexport const commonESIMFields = {\n    imsi: z.number(),\n    qr: z.string(),\n    iccid: z.string(),\n    provider: z.string(),\n    coverage_label: z.string().nullable().optional(),\n    total_data: z.number().nullable(),\n    data_left: z.number().nullable(),\n    data_used: z.boolean().nullable(),\n    status: z.string().nullable(),\n    name: z.string(),\n    android_auto: z.boolean(),\n    partner_price: z.number().nullable(),\n    promo: z.string().nullable(),\n    type: z.enum(['api', 'promo', 'balance', 'code', 'external', 'payment']),\n    is_auto_install: z.boolean(),\n    is_archived: z.boolean(),\n    user: z.string().nullable(),\n    payment: z.string().nullable(),\n    apn: z.string().nullable()\n};\n\n// App schema for ESIM\nexport const esimAppSchema = baseModelAppSchema.extend({\n    ...commonESIMFields,\n    country: z.string().nullable(),\n    time_assigned: zDateString().nullable(),\n    last_updated: zDateString().nullable(),\n    partner: z.string().nullable(),\n});\n\n// Define types based on schemas\nexport type ESIMApp = z.infer<typeof esimAppSchema>;\n\n// For backwards compatibility\nexport type HESIM = ESIMApp; ","import { z } from 'zod';\nimport { DocumentReference, Timestamp } from 'firebase-admin/firestore';\nimport {\n    baseModelSchema,\n    timestampSchema\n} from './core';\nimport {\n    GenericRefFieldMapping,\n    GenericDateFieldMapping,\n    genericToFirestore,\n    genericFromFirestore\n} from './utils';\nimport {\n    COUNTRY_COLLECTION,\n    USER_COLLECTION,\n    PARTNER_COLLECTION,\n    PAYMENT_COLLECTION\n} from './utils/collections';\nimport {\n    countryRefNullable,\n    userRefNullable,\n    partnerRefNullable,\n    paymentRefNullable\n} from './refs';\n\n// Import base schemas\nimport {\n    commonESIMFields,\n    ESIMApp\n} from '../base/esim';\n\n// Re-export base schemas\nexport * from '../base/esim';\n\n// Firestore schema for ESIM\nexport const esimFirestoreSchema = baseModelSchema.extend({\n    ...commonESIMFields,\n    country: countryRefNullable,\n    time_assigned: timestampSchema.nullable(),\n    last_updated: timestampSchema.nullable(),\n    partner: partnerRefNullable,\n});\n\n// Define types based on schemas\nexport type ESIMFirestore = z.infer<typeof esimFirestoreSchema>;\n\n// Field mapping for conversions\nconst refFieldMappings: GenericRefFieldMapping<ESIMApp, ESIMFirestore>[] = [\n    { app: 'country', firestore: 'country', collection: COUNTRY_COLLECTION, nullable: true },\n    { app: 'user', firestore: 'user', collection: USER_COLLECTION, nullable: true },\n    { app: 'partner', firestore: 'partner', collection: PARTNER_COLLECTION, nullable: true },\n    { app: 'payment', firestore: 'payment', collection: PAYMENT_COLLECTION, nullable: true }\n];\n\nconst dateFieldMappings: GenericDateFieldMapping<ESIMApp, ESIMFirestore>[] = [\n    { field: 'time_assigned', nullable: true },\n    { field: 'last_updated', nullable: true }\n];\n\n// Conversion functions\nexport const esimToFirestore = (esim: ESIMApp): ESIMFirestore => {\n    return genericToFirestore({\n        appObject: esim,\n        refFieldMappings,\n        dateFieldMappings\n    });\n};\n\nexport const esimFromFirestore = (firestoreEsim: ESIMFirestore): ESIMApp => {\n    return genericFromFirestore({\n        firestoreObject: firestoreEsim,\n        refFieldMappings,\n        dateFieldMappings\n    });\n};\n\n// For backwards compatibility\nexport type ESIM = ESIMFirestore; ","import { z } from 'zod';\nimport { USER_COLLECTION, userRefSchema, userRefString, userRefStringNullable } from './refs';\nimport {\n    baseModelSchema,\n    timestampSchema\n} from './core';\nimport {\n    GenericDateFieldMapping,\n    genericToFirestore,\n    genericFromFirestore,\n    GenericRefFieldMapping\n} from './utils';\n\n// Import base schemas\nimport {\n    paymentAppSchema as basePaymentAppSchema,\n    PaymentApp\n} from '../base/payment';\n\n// Re-export base schemas\nexport * from '../base/payment';\n\n// Firestore schema for Payment\nexport const paymentFirestoreSchema = baseModelSchema.extend({\n    amount: z.number(),\n    customer: z.string(),\n    date: timestampSchema, // In Firestore this is a Timestamp\n    iccid: z.string(),\n    package: z.string(),\n    promo: z.string(),\n    topup: z.boolean(),\n    user: userRefStringNullable\n});\n\n// Define type based on schema\nexport type PaymentFirestore = z.infer<typeof paymentFirestoreSchema>;\n\n// Define date field mappings\nconst dateFieldMappings: GenericDateFieldMapping<PaymentApp, PaymentFirestore>[] = [\n    { field: 'date' }\n];\n\nconst refFieldMappings: GenericRefFieldMapping<PaymentApp, PaymentFirestore>[] = [\n    { app: 'user', firestore: 'user', collection: USER_COLLECTION },\n];\n\n// Conversion functions using generic utilities\nexport const paymentToFirestore = (payment: PaymentApp): PaymentFirestore => {\n    return genericToFirestore({\n        appObject: payment,\n        refFieldMappings: refFieldMappings,   \n        dateFieldMappings\n    });\n};\n\nexport const paymentFromFirestore = (firestorePayment: PaymentFirestore): PaymentApp => {\n    return genericFromFirestore({\n        firestoreObject: firestorePayment,\n        refFieldMappings: [],\n        dateFieldMappings\n    });\n};\n\n// For backwards compatibility\nexport type Payment = PaymentFirestore; ","import { z } from 'zod';\nimport {\n    baseModelAppSchema,\n    zDateString\n} from './helpers';\nimport { userRefStringNullable } from './refs';\n// App schema for Payment\nexport const paymentAppSchema = baseModelAppSchema.extend({\n    amount: z.number(),\n    customer: z.string(),\n    date: zDateString(),\n    iccid: z.string(),\n    package: z.string(),\n    promo: z.string(),\n    topup: z.boolean(),\n    user: userRefStringNullable\n});\n\n// Define type based on schema\nexport type PaymentApp = z.infer<typeof paymentAppSchema>;\n\n// For backwards compatibility\nexport type HPayment = PaymentApp; ","import { z } from 'zod';\nimport {\n    timestampSchema\n} from './core';\nimport {\n    GenericDateFieldMapping,\n    genericToFirestore,\n    genericFromFirestore\n} from './utils';\nimport { Timestamp } from 'firebase-admin/firestore';\n\n// Import base schemas\nimport {\n    messageAppSchema as baseMessageAppSchema,\n    MessageApp,\n    SentMessagesApp\n} from '../base/message';\n\n// Firestore schema for Message\nexport const messageFirestoreSchema = z.object({\n    id: z.string(),\n    key: z.string(),\n    method: z.enum([\"push\", \"sms\", \"email\"]),\n    status: z.enum([\"pending\", \"sent\", \"failed\", \"delivered\"]),\n    created_at: timestampSchema,\n    updated_at: timestampSchema\n});\n\n// Define SentMessages schema (a record of messages)\nexport const sentMessagesFirestoreSchema = z.record(messageFirestoreSchema);\n\n// Define types based on schemas\nexport type MessageFirestore = z.infer<typeof messageFirestoreSchema>;\nexport type SentMessagesFirestore = z.infer<typeof sentMessagesFirestoreSchema>;\n\n// Re-export app schemas and types\nexport {\n    baseMessageAppSchema as messageAppSchema\n};\nexport type { MessageApp, SentMessagesApp };\n\n// Define date field mappings\nconst dateFieldMappings: GenericDateFieldMapping<MessageApp, MessageFirestore>[] = [\n    { field: 'created_at' },\n    { field: 'updated_at' }\n];\n\n// Conversion functions\nexport const messageToFirestore = (message: MessageApp): MessageFirestore => {\n    return genericToFirestore({\n        appObject: message,\n        refFieldMappings: [],\n        dateFieldMappings\n    });\n};\n\nexport const messageFromFirestore = (firestoreMessage: MessageFirestore): MessageApp => {\n    return genericFromFirestore({\n        firestoreObject: firestoreMessage,\n        refFieldMappings: [],\n        dateFieldMappings\n    });\n};\n\n// Convert a record of messages - with null safety\nexport const sentMessagesToFirestore = (sentMessages: SentMessagesApp): SentMessagesFirestore => {\n    const result: Record<string, MessageFirestore> = {};\n\n    for (const key in sentMessages) {\n        const message = sentMessages[key];\n        if (message) {\n            result[key] = messageToFirestore(message);\n        }\n    }\n\n    return result;\n};\n\nexport const sentMessagesFromFirestore = (firestoreSentMessages: SentMessagesFirestore): SentMessagesApp => {\n    const result: Record<string, MessageApp> = {};\n\n    for (const key in firestoreSentMessages) {\n        const firestoreMessage = firestoreSentMessages[key];\n        if (firestoreMessage) {\n            result[key] = messageFromFirestore(firestoreMessage);\n        }\n    }\n\n    return result;\n};\n\n// For backwards compatibility\nexport type Message = MessageFirestore;\nexport type SentMessages = SentMessagesFirestore;\n\n// Helper function for backward compatibility with runtime type conversion\nexport const convertSentMessagesToFirestore = (sentMessages: Record<string, MessageApp>): Record<string, MessageFirestore> => {\n    const result: Record<string, MessageFirestore> = {};\n\n    for (const key in sentMessages) {\n        const message = sentMessages[key];\n        if (message) {\n            // Convert Date to Timestamp for Firestore if needed\n            const firestoreMessage: MessageFirestore = {\n                ...message,\n                created_at: message.created_at instanceof Date\n                    ? Timestamp.fromDate(message.created_at)\n                    : message.created_at,\n                updated_at: message.updated_at instanceof Date\n                    ? Timestamp.fromDate(message.updated_at)\n                    : message.updated_at\n            } as MessageFirestore;\n\n            result[key] = firestoreMessage;\n        }\n    }\n\n    return result;\n};\n\nexport const convertSentMessagesFromFirestore = (firestoreSentMessages: Record<string, MessageFirestore>): Record<string, MessageApp> => {\n    const result: Record<string, MessageApp> = {};\n\n    for (const key in firestoreSentMessages) {\n        const firestoreMessage = firestoreSentMessages[key];\n        if (firestoreMessage) {\n            // Convert Timestamp to Date for app if needed\n            const appMessage: MessageApp = {\n                ...firestoreMessage,\n                created_at: firestoreMessage.created_at instanceof Timestamp\n                    ? firestoreMessage.created_at.toDate()\n                    : firestoreMessage.created_at as unknown as Date,\n                updated_at: firestoreMessage.updated_at instanceof Timestamp\n                    ? firestoreMessage.updated_at.toDate()\n                    : firestoreMessage.updated_at as unknown as Date\n            };\n\n            result[key] = appMessage;\n        }\n    }\n\n    return result;\n}; ","import { z } from 'zod';\nimport { baseModelAppSchema, zDateString } from './helpers';\n\n// App schema for Message\nexport const messageAppSchema = z.object({\n    id: z.string(),\n    key: z.string(),\n    method: z.enum([\"push\", \"sms\", \"email\"]),\n    status: z.enum([\"pending\", \"sent\", \"failed\", \"delivered\"]),\n    created_at: zDateString(),\n    updated_at: zDateString()\n});\n\n// Define SentMessages schema (a record of messages)\nexport const sentMessagesAppSchema = z.record(messageAppSchema);\n\n// Define types based on schemas\nexport type MessageApp = z.infer<typeof messageAppSchema>;\nexport type SentMessagesApp = z.infer<typeof sentMessagesAppSchema>;\n\n// For backwards compatibility\nexport type HMessage = MessageApp;\nexport type HSentMessages = SentMessagesApp; ","import { z } from 'zod';\n\n/**\n * Adds documentation to a Zod schema using JSDoc-style comments\n * This makes schema fields self-documenting when users hover over them in their IDE\n * \n * @param schema The Zod schema to document\n * @param description Documentation string that will appear in IDE tooltips\n * @returns The same schema with documentation attached\n */\nexport function documented<T extends z.ZodTypeAny>(\n  schema: T,\n  description: string\n): T {\n  return schema.describe(description) as T;\n}\n\n/**\n * Creates a documented object schema by adding JSDoc comments to each field\n * \n * @param schema The object schema to document\n * @param fieldDocs Record of field names to their documentation strings\n * @returns The same schema with field documentation attached\n */\nexport function documentedObject<T extends z.ZodObject<any>>(\n  schema: T,\n  fieldDocs: Record<string, string>\n): T {\n  type Shape = z.ZodRawShape;\n  \n  // Get the original shape of the schema\n  const shape = schema.shape as Shape;\n  \n  // Create a new shape with documented fields\n  const documentedShape = { ...shape };\n  \n  for (const [key, value] of Object.entries(shape)) {\n    if (key in fieldDocs && fieldDocs[key]) {\n      documentedShape[key] = documented(value as z.ZodTypeAny, fieldDocs[key]);\n    }\n  }\n  \n  // Return a new schema with the documented shape\n  return schema.extend(documentedShape) as T;\n} ","import { z } from 'zod';\nimport {\n    baseModelAppSchema\n} from './helpers';\nimport { documentedObject } from '../utils/documentation';\n\n// Define schema for conversion rates (for backward compatibility)\nexport const conversionRateSchema = z.object({\n    currency: z.number()\n});\n\nexport type CoversionRate = z.infer<typeof conversionRateSchema>;\n\n// Define documentation for the schema fields\nconst currencyFieldDocs = {\n    code: 'ISO 4217 currency code (e.g., \"USD\", \"EUR\")',\n    symbol: 'Currency symbol (e.g., \"$\", \"\")',\n    name: 'Full name of the currency (e.g., \"US Dollar\")',\n    rate: 'Exchange rate relative to base currency',\n    is_default: 'Whether this is the default currency'\n};\n\n// Common currency fields shared between schemas\nexport const commonCurrencyFields = {\n    code: z.string(),\n    symbol: z.string(),\n    name: z.string(),\n    rate: z.number(),\n    is_default: z.boolean()\n};\n\n// App schema for Currency\nexport const currencyAppSchema = documentedObject(\n    baseModelAppSchema.extend({\n        ...commonCurrencyFields\n    }),\n    currencyFieldDocs\n);\n\n// Define type based on schema\nexport type CurrencyApp = z.infer<typeof currencyAppSchema>;\n\n// For backwards compatibility\nexport type HCurrency = CurrencyApp; ","import { z } from 'zod';\nimport {\n    baseModelSchema\n} from './core';\nimport {\n    GenericDateFieldMapping,\n    genericToFirestore,\n    genericFromFirestore\n} from './utils';\nimport { documentedObject } from '../utils/documentation';\n\n// Import base schemas\nimport {\n    commonCurrencyFields,\n    conversionRateSchema,\n    CoversionRate,\n    CurrencyApp\n} from '../base/currency';\n\n// Re-export base schemas\nexport * from '../base/currency';\n\n// Define documentation for the schema fields\nconst currencyFieldDocs = {\n    code: 'ISO 4217 currency code (e.g., \"USD\", \"EUR\")',\n    symbol: 'Currency symbol (e.g., \"$\", \"\")',\n    name: 'Full name of the currency (e.g., \"US Dollar\")',\n    rate: 'Exchange rate relative to base currency',\n    is_default: 'Whether this is the default currency'\n};\n\n// Firestore schema for Currency\nexport const currencyFirestoreSchema = documentedObject(\n    baseModelSchema.extend({\n        ...commonCurrencyFields\n    }),\n    currencyFieldDocs\n);\n\n// Define type based on schema\nexport type CurrencyFirestore = z.infer<typeof currencyFirestoreSchema>;\n\n// Field mappings for date conversions\nconst dateFieldMappings: GenericDateFieldMapping<CurrencyApp, CurrencyFirestore>[] = [];\n\n// Conversion functions\nexport const currencyToFirestore = (currency: CurrencyApp): CurrencyFirestore => {\n    return genericToFirestore({\n        appObject: currency,\n        refFieldMappings: [],\n        dateFieldMappings\n    });\n};\n\nexport const currencyFromFirestore = (firestoreCurrency: CurrencyFirestore): CurrencyApp => {\n    return genericFromFirestore({\n        firestoreObject: firestoreCurrency,\n        refFieldMappings: [],\n        dateFieldMappings\n    });\n};\n\n// For backwards compatibility\nexport type Currency = CurrencyFirestore; ","import { z } from 'zod';\nimport {\n    baseModelSchema,\n    timestampSchema\n} from './core';\nimport {\n    GenericDateFieldMapping,\n    genericToFirestore,\n    genericFromFirestore\n} from './utils';\n\n// Import base schemas\nimport {\n    apiLogAppSchema,\n    ApiLogApp\n} from '../base/apiLogs';\n\n// Re-export base schemas\nexport * from '../base/apiLogs';\n\n// Firestore schema for ApiLog\nexport const apiLogFirestoreSchema = z.object({\n    id: z.string().optional(),\n    method: z.string(),\n    user_id: z.string().optional(),\n    path: z.string(),\n    resource_type: z.string().optional(),\n    resource_id: z.string().optional(),\n    partner_id: z.string().optional(),\n    payload: z.record(z.unknown()).optional(),\n    timestamp: timestampSchema,\n    status_code: z.number()\n});\n\n// Define type based on schema\nexport type ApiLogFirestore = z.infer<typeof apiLogFirestoreSchema>;\n\n// Define date field mappings\nconst dateFieldMappings: GenericDateFieldMapping<ApiLogApp, ApiLogFirestore>[] = [\n    { field: 'timestamp' }\n];\n\n// Conversion functions\nexport const apiLogToFirestore = (apiLog: ApiLogApp): ApiLogFirestore => {\n    return genericToFirestore({\n        appObject: apiLog,\n        refFieldMappings: [],\n        dateFieldMappings\n    });\n};\n\nexport const apiLogFromFirestore = (firestoreApiLog: ApiLogFirestore): ApiLogApp => {\n    return genericFromFirestore({\n        firestoreObject: firestoreApiLog,\n        refFieldMappings: [],\n        dateFieldMappings\n    });\n};\n\n// For backwards compatibility\nexport type ApiLog = ApiLogFirestore; ","import { z } from 'zod';\nimport { zDateString } from './helpers';\n\n// App schema for ApiLog\nexport const apiLogAppSchema = z.object({\n    id: z.string().optional(),\n    method: z.string(),\n    user_id: z.string().optional(),\n    path: z.string(),\n    resource_type: z.string().optional(),\n    resource_id: z.string().optional(),\n    partner_id: z.string().optional(),\n    payload: z.record(z.unknown()).optional(),\n    timestamp: zDateString(),\n    status_code: z.number()\n});\n\n// Define type based on schema\nexport type ApiLogApp = z.infer<typeof apiLogAppSchema>;\n\n// For backwards compatibility\nexport type HApiLog = ApiLogApp; "],"mappings":"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","names":["z","z","Timestamp","z","z","Timestamp","firestore","z","nestedFieldMappings","refFieldMappings","dateFieldMappings","nestedFieldMappings","firestore","z","z","z","z","z","z","z","commonPackagePriceFields","z","commonPricingStrategyFields","z","z","z","z","z","z","FieldValue","z","z","apiKeySchema","z","apiKeysSchema","nestedFieldMappings","result","FieldValue","refFieldMappings","dateFieldMappings","z","z","z","z","commonPackageFields","z","refFieldMappings","z","z","z","z","refFieldMappings","dateFieldMappings","z","z","refFieldMappings","dateFieldMappings","z","z","z","z","dateFieldMappings","refFieldMappings","z","Timestamp","z","z","z","dateFieldMappings","z","z","currencyFieldDocs","dateFieldMappings","z","z","z","z","dateFieldMappings"]}